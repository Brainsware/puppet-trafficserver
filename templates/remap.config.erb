set #comment[1] "This file managed by Puppet. Local changes will be overwritten"
set #comment[2] "during the next Puppet run."
<% if @map and not @map.empty? -%>
<%   @map.each do |url,backend| -%>
set map[.='<%= url -%>'] <%= url %>
set map[.='<%= url -%>']/replacement <%= backend %>
<%   end -%>
<% end -%>
<% if @regex_map and not @regex_map.empty? -%>
<%   @regex_map.each do |url,backend| -%>
set regex_map[.='<%= url -%>'] <%= url %>
set regex_map[.='<%= url -%>']/replacement <%= backend %>
<%   end -%>
<% end -%>
<% if @reverse_map and not @reverse_map.empty? -%>
<%   @reverse_map.each do |backend,url| -%>
set reverse_map[.='<%= backend -%>'] <%= backend %>
set reverse_map[.='<%= url -%>']/replacement <%= url %>
<%   end -%>
<% end -%>
<% if @redirect and not @redirect.empty? -%>
<%   @redirect.each do |url,replacement| -%>
set redirect[.='<%= url -%>'] <%= url %>
set redirect[.='<%= url -%>']/replacement <%= replacement %>
<%   end -%>
<% end -%>
